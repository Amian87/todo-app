var express=require("express"),bodyParser=require("body-parser"),parseUrlEncoded=bodyParser.urlencoded({extended:!1}),Storage=require("./storage"),app=express(),todoStore=new Storage("todolist");todoStore.getValue()||todoStore.initialize(),app.use(express.static(__dirname+"/public")),app.use(bodyParser.json()),app.get("/",function(e,o){o.render("index")}),app.get("/api/todo",function(e,o){return o.json(todoStore.getValue())}),app.post("/api/todo",parseUrlEncoded,function(e,o){return todoStore.saveValue(e.body.item),o.send("success")}),app.delete("/api/todo",function(e,o){return todoStore.removeValue(e.body.item),o.send("value deleted")}),app.listen(3e3);